# Wix Store Fraud Detector AI Camp

This **updated** project aims to detect fraudulent activity taking place in the AI Camp Wix Store.

## Quickstart

1. Clone this repository onto your computer
   ```$ git clone https://github.com/Soontosh/Wix-Tracker.git```
2. Install the necessary packages
   ```$ pip install -r requirements.txt```
3. Run the server locally
   ```$ python manage.py runserver```

## Additional Information

This section contains additional information regarding our project.

### Tech Stack

We use Django for backend, Railway for deployment, and Railway w/ PostgreSQL for our database. For the Discord bot, which is currently on a seperate repo, we use Discord.py.

Note: Only Santosh currently has access to the Railway db.

### Workflow

This is a very high-level workflow. We will be updating it and providing a more in-depth explanation later on.

1. Webhook is sent to our backend regarding an invoice being sent. Our database is updated with the necessary information.
2. Webhook is sent to our backend regarding an invoice being overdue. We send an email to the customer and update our database accordingly.
3. Over the next 3 weeks, we will continue to remind our customer about the overdue invoice. If it is still not paid, the Avengers will be notified.

Additionally, we will send be sending weekly reports to Richard and Michael regarding fraudulent activity via Discord.

## Database Information and ERD

Our database is hosted on Railway w/ PostgreSQL. It is currently very simple and subject to change

### Tables

#### Invoice

Contains information regarding all invoices, even those which never went overdue.

- invoice_number (IntegerField): The invoice tracking number and unique identifier given by Wix(unconfirmed)
- subscription_id (CharField): Unique subscription ID generated by Wix; Can be used in tandem with Wix API to extract data regarding subscription
- contact_id (CharField): Contact ID of customer, allows us to get their contact information
- cycle (IntegerField): The subscription cycle number this invoice corresponds to
- title (TextField): The title of the invoice
- issue_date (DateField): Date at which the invoice was issued
- due_date (DateField): Due date of the invoice
- total (Float Field): Total cost of the invoice
- currency (Char Field): Currency in which the invoice is priced
- preview_link (Text Field): Nullable link to preview the invoice

#### Email

Contains information regarding all emails sent to customers about overdue invoices.

- email_id (Auto Field): Automatically generated ID for row, unrelated to Wix
- invoice (Foreign Key): Foreign Key corresponding to invoice table, sets self to "deleted" on foreign row deletion
- contact_id (Char Field): Contact ID of customer, allows us to get their contact information
- recipient_email (Char Field): Email of the recipient
- email_contents (Text Field): Contents of the email
- send_date (Date & Time Field): Date and time at which email was sent

### ERD
A simple ERD can be found [here](https://lucid.app/lucidchart/b38f4036-e9b4-4933-a6f4-87c41278a93a/edit?viewport_loc=-1921%2C21%2C3978%2C1768%2C0_0&invitationId=inv_0ac1b974-1ed6-430a-8c73-3c35115adf14)

### How to make changes

To edit the database, edit ```models.py```, then run the following commands.

1. ```$ python manage.py makemigrations```
2. ```$ python manage.py migrate```

The changes will immediately be reflected on Railway. As of now, we do not have a pro plan on Railway, meaning we cannot view the same database. You have two options

1. Collaborate with me, Santosh, to see if your changes went through
2. Create your own branch and connect your own PostgreSQL database from Railway to our Django project. View **this tutorial** for help.

**Remember, when merging onto master, DO NOT OVERWRITE THE ORIGINAL RAILWAY DATABASE CREDENTIALS UNLESS SOMEONE TELLS YOU OTHERWISE!**
